<!DOCTYPE html>
<html>
<head>
<title>Readable - Shadow Letter Game</title>

<style>
body {
    background-color: #ffeef5;
    font-family: 'OpenDyslexic', Arial;
    text-align: center;
    padding: 20px;
}

h1 {
    color: #ff9ec4;
}

#shadowBox {
    font-size: 120px;
    color: #d8cfd6;
    margin: 40px 0;
    filter: blur(4px);
}

.options button {
    font-size: 40px;
    margin: 10px;
    padding: 15px 25px;
    border: none;
    border-radius: 15px;
    background: #ffd6e7;
    cursor: pointer;
    font-family: 'OpenDyslexic', Arial;
    transition: 0.3s;
}

.options button:hover {
    background: #ffc2db;
    transform: scale(1.1);
}

#feedback {
    font-size: 22px;
    margin-top: 20px;
}

#score {
    font-size: 18px;
    margin-top: 10px;
    color: #555;
}

.next-btn {
    margin-top: 20px;
    padding: 10px 20px;
    background: #ffe0ea;
    border: none;
    border-radius: 15px;
    cursor: pointer;
}

.back-btn {
    margin-top: 15px;
    padding: 10px 20px;
    background: #ffd6e7;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    font-family: 'OpenDyslexic', Arial;
}
</style>
</head>

<body>

<h1>ðŸŒ‘ Shadow Letter Match ðŸŒ¸</h1>

<div id="shadowBox"></div>

<div class="options" id="options"></div>

<div id="feedback"></div>
<div id="score">Score: 0</div>

<button class="next-btn" onclick="generateQuestion()">Next Letter</button>
<br>
<button class="back-btn" onclick="goBack()">â¬… Go Back</button>

<script>

const confusingSets = [
    ["b", "d", "p", "q"],
    ["m", "n", "w"],
    ["a", "o", "e"],
    ["i", "l", "t"],
    ["u", "v"]
];

let currentAnswer = "";
let score = 0;

function generateQuestion() {

    document.getElementById("feedback").innerHTML = "";

    const set = confusingSets[Math.floor(Math.random() * confusingSets.length)];
    currentAnswer = set[Math.floor(Math.random() * set.length)];

    document.getElementById("shadowBox").innerHTML = currentAnswer;

    const optionsDiv = document.getElementById("options");
    optionsDiv.innerHTML = "";

    let shuffled = [...set].sort(() => 0.5 - Math.random());

    shuffled.forEach(letter => {
        const btn = document.createElement("button");
        btn.innerHTML = letter;
        btn.onclick = () => checkAnswer(letter);
        optionsDiv.appendChild(btn);
    });
}

function checkAnswer(selected) {

    if(selected === currentAnswer) {
        score++;
        document.getElementById("feedback").innerHTML =
            "ðŸŒŸ Amazing! That is correct!";
        speakLetter(currentAnswer);
    } else {
        document.getElementById("feedback").innerHTML =
            "ðŸ’› Oops! Try again!";
    }

    document.getElementById("score").innerHTML = "Score: " + score;
}

function speakLetter(letter) {
    let speech = new SpeechSynthesisUtterance(letter);
    speech.rate = 0.9;
    speech.pitch = 1.3;

    const voices = speechSynthesis.getVoices();
    let femaleVoice = voices.find(v =>
        v.name.toLowerCase().includes("zira") ||
        v.name.toLowerCase().includes("female") ||
        v.name.toLowerCase().includes("samantha")
    );

    if(femaleVoice) speech.voice = femaleVoice;

    speechSynthesis.speak(speech);
}

/* GO BACK FUNCTION */
function goBack() {
    speechSynthesis.cancel();
    window.location.href = "lab.html"; 
    // Change index.html if your main page name is different
}

generateQuestion();

</script>

</body>
</html>